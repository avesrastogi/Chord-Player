{"id":"../node_modules/@tonaljs/chord-detect/dist/index.es.js","dependencies":[{"name":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-detect/dist/index.es.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/avni/Chord-Player/package.json","includedInParent":true,"mtime":1600172410651},{"name":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-detect/package.json","includedInParent":true,"mtime":1600171563882},{"name":"@tonaljs/chord-type","loc":{"line":1,"column":20},"parent":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-detect/dist/index.es.js","resolved":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-type/dist/index.es.js"},{"name":"@tonaljs/core","loc":{"line":2,"column":21},"parent":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-detect/dist/index.es.js","resolved":"/home/avni/Chord-Player/node_modules/@tonaljs/core/dist/index.es.js"},{"name":"@tonaljs/pcset","loc":{"line":3,"column":22},"parent":"/home/avni/Chord-Player/node_modules/@tonaljs/chord-detect/dist/index.es.js","resolved":"/home/avni/Chord-Player/node_modules/@tonaljs/pcset/dist/index.es.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.detect = detect;\nexports.default = void 0;\n\nvar _chordType = require(\"@tonaljs/chord-type\");\n\nvar _core = require(\"@tonaljs/core\");\n\nvar _pcset = require(\"@tonaljs/pcset\");\n\nconst namedSet = notes => {\n  const pcToName = notes.reduce((record, n) => {\n    const chroma = (0, _core.note)(n).chroma;\n\n    if (chroma !== undefined) {\n      record[chroma] = record[chroma] || (0, _core.note)(n).name;\n    }\n\n    return record;\n  }, {});\n  return chroma => pcToName[chroma];\n};\n\nfunction detect(source) {\n  const notes = source.map(n => (0, _core.note)(n).pc).filter(x => x);\n\n  if (_core.note.length === 0) {\n    return [];\n  }\n\n  const found = findExactMatches(notes, 1);\n  return found.filter(chord => chord.weight).sort((a, b) => b.weight - a.weight).map(chord => chord.name);\n}\n\nfunction findExactMatches(notes, weight) {\n  const tonic = notes[0];\n  const tonicChroma = (0, _core.note)(tonic).chroma;\n  const noteName = namedSet(notes); // we need to test all chormas to get the correct baseNote\n\n  const allModes = (0, _pcset.modes)(notes, false);\n  const found = [];\n  allModes.forEach((mode, index) => {\n    // some chords could have the same chroma but different interval spelling\n    const chordTypes = (0, _chordType.all)().filter(chordType => chordType.chroma === mode);\n    chordTypes.forEach(chordType => {\n      const chordName = chordType.aliases[0];\n      const baseNote = noteName(index);\n      const isInversion = index !== tonicChroma;\n\n      if (isInversion) {\n        found.push({\n          weight: 0.5 * weight,\n          name: `${baseNote}${chordName}/${tonic}`\n        });\n      } else {\n        found.push({\n          weight: 1 * weight,\n          name: `${baseNote}${chordName}`\n        });\n      }\n    });\n  });\n  return found;\n}\n\nvar index = {\n  detect\n};\nvar _default = index;\nexports.default = _default;"},"sourceMaps":{"js":{"mappings":[],"sources":{},"lineCount":null}},"error":null,"hash":"a383aa8a4eb134ef6ec1ce2b009a3f16","cacheData":{"env":{}}}